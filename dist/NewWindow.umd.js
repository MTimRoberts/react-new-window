(function(u,p){typeof exports=="object"&&typeof module<"u"?module.exports=p(require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["react","react-dom"],p):(u=typeof globalThis<"u"?globalThis:u||self,u.ReactNewWindow=p(u.React,u.ReactDOM))})(this,function(u,p){"use strict";const T=(e=>e&&typeof e=="object"&&"default"in e?e:{default:e})(p);function S(e){return e.cssText.split("url(").map(n=>n[1]==="/"?`${n.slice(0,1)}${window.location.origin}${n.slice(1)}`:n).join("url(")}function v(e){const n=["@keyframes",e.name,"{"];return Array.from(e.cssRules).forEach(c=>{n.push(c.keyText,"{",c.style.cssText,"}")}),n.push("}"),n.join(" ")}function x(e,n){const c=n.createDocumentFragment();Array.from(e.styleSheets).forEach(r=>{let t;try{t=r.cssRules}catch(i){console.error(i)}if(t&&Object.values(t).some(i=>i instanceof CSSFontFaceRule)&&r.href,t){const i=[];Array.from(r.cssRules).forEach(s=>{const{type:o}=s;if(o===0)return;let l="";o===CSSRule.KEYFRAMES_RULE?l=v(s):[CSSRule.IMPORT_RULE,CSSRule.FONT_FACE_RULE].includes(o)?l=S(s):l=s.cssText,i.push(l)});const f=n.createElement("style");f.textContent=i.join(`
`),c.appendChild(f)}else if(r.href){const i=n.createElement("link");i.rel="stylesheet",i.href=r.href,c.appendChild(i)}}),n.head.appendChild(c)}const W=e=>e.nodeType===Node.ELEMENT_NODE;function b(e){return Object.keys(e).reduce((n,c)=>{const r=e[c];return typeof r=="boolean"?n.push(`${c}=${r?"yes":"no"}`):n.push(`${c}=${r}`),n},[]).join(",")}const a={url:"",name:"",title:"",features:{width:"600px",height:"640px"},center:"parent",copyStyles:!0,closeOnUnmount:!0},O=e=>{const{url:n=a.url,name:c=a.name,title:r=a.title,features:t=a.features,center:i=a.center,copyStyles:f=a.copyStyles,closeOnUnmount:s=a.closeOnUnmount,onOpen:o,onUnload:l,onBlock:w,children:y}=e,[h,L]=u.useState();if(u.useEffect(()=>{const d=R({url:n,title:r,name:c,features:t,center:i,copyStyles:f,closeOnUnmount:s,onOpen:o,onUnload:l,onBlock:w});d&&L(d);const k=setInterval(()=>{(!d||d.closed)&&g()},50),g=()=>{clearInterval(k),l&&l()};return d&&d.addEventListener("beforeunload",()=>g()),()=>{if(d){if(s)d.close();else if(e.children){const C=m(d);if(C){const E=C.cloneNode(!0);W(E)&&(E.setAttribute("id","new-window-container-static"),d.document.body.appendChild(E))}}}}},[]),h){const d=m(h);d&&T.default.createPortal(y,d)}return null},R=e=>{const{url:n,title:c,name:r,features:t,onBlock:i,onOpen:f,center:s}=e;if(typeof s=="string"&&(t.width===void 0||t.height===void 0))console.warn("react-new-window: width and height window features must be present when a center prop is provided");else if(s==="parent")window.top===null?console.warn("react-new-window: can't access parent window"):(t.left=window.top.outerWidth/2+window.top.screenX-t.width/2,t.top=window.top.outerHeight/2+window.top.screenY-t.height/2);else if(s==="screen"){const l=window.screenLeft!==void 0?window.screenLeft:"left"in window.screen?window.screen.left:0,w=window.screenTop!==void 0?window.screenTop:"top"in window.screen?window.screen.top:0,y=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,h=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height;t.left=y/2-t.width/2+l,t.top=h/2-t.height/2+w}const o=window.open(n,r,b(t));if(o){if(o.document.title=c,!!m(o)){const w=o.document.getElementById("new-window-container-static");w&&o.document.body.removeChild(w)}else{const w=o.document.createElement("div");w.setAttribute("id","new-window-container"),o.document.body.appendChild(w)}e.copyStyles&&setTimeout(()=>x(document,o.document),0),f&&f(o)}else i?i():console.warn("react-new-window: A new window could not be opened. Maybe it was blocked.");return o},m=e=>e.document.getElementById("new-window-container");return O});
