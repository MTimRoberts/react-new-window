(function(a,p){typeof exports=="object"&&typeof module<"u"?module.exports=p(require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["react","react-dom"],p):(a=typeof globalThis<"u"?globalThis:a||self,a.ReactNewWindow=p(a.React,a.ReactDOM))})(this,function(a,p){"use strict";const S=(e=>e&&typeof e=="object"&&"default"in e?e:{default:e})(p);function v(e){return e.cssText.split("url(").map(t=>t[1]==="/"?`${t.slice(0,1)}${window.location.origin}${t.slice(1)}`:t).join("url(")}function x(e){const t=["@keyframes",e.name,"{"];return Array.from(e.cssRules).forEach(c=>{t.push(c.keyText,"{",c.style.cssText,"}")}),t.push("}"),t.join(" ")}function R(e,t){const c=t.createDocumentFragment();Array.from(e.styleSheets).forEach(d=>{let n;try{n=d.cssRules}catch(i){console.error(i)}const f=n&&Object.values(n).some(i=>i instanceof CSSFontFaceRule)&&d.href;if(n&&!f){const i=[];Array.from(d.cssRules).forEach(o=>{const{type:l}=o;if(l===0)return;let r="";l===CSSRule.KEYFRAMES_RULE?r=x(o):[CSSRule.IMPORT_RULE,CSSRule.FONT_FACE_RULE].includes(l)?r=v(o):r=o.cssText,i.push(r)});const u=t.createElement("style");u.textContent=i.join(`
`),c.appendChild(u)}else if(d.href){const i=t.createElement("link");i.rel="stylesheet",i.href=d.href,c.appendChild(i)}}),t.head.appendChild(c)}const W=e=>e.nodeType===Node.ELEMENT_NODE;function b(e){return Object.keys(e).reduce((t,c)=>{const d=e[c];return typeof d=="boolean"?t.push(`${c}=${d?"yes":"no"}`):t.push(`${c}=${d}`),t},[]).join(",")}const w={url:"",name:"",title:"",features:{width:"600px",height:"640px"},center:"parent",copyStyles:!0,closeOnUnmount:!0},F=e=>{const{url:t=w.url,name:c=w.name,title:d=w.title,features:n=w.features,center:f=w.center,copyStyles:i=w.copyStyles,closeOnUnmount:u=w.closeOnUnmount,onOpen:o,onUnload:l,onBlock:r,children:m}=e,[s,L]=a.useState();if(a.useEffect(function(){const g=O({url:t,title:d,name:c,features:n,center:f,copyStyles:i,closeOnUnmount:u,onOpen:o,onUnload:l,onBlock:r});g&&L(g);const N=setInterval(()=>{(!s||s.closed)&&C()},50),C=()=>{clearInterval(N),l&&l()};return s&&s.addEventListener("beforeunload",()=>C()),()=>{if(s){if(u)s.close();else if(e.children){const T=h(s);if(T){const E=T.cloneNode(!0);W(E)&&(E.setAttribute("id","new-window-container-static"),s.document.body.appendChild(E))}}}}},[]),s){const y=h(s);if(y)return S.default.createPortal(m,y)}return null},O=e=>{const{url:t,title:c=w.title,name:d,features:n=w.features,onBlock:f,onOpen:i,center:u}=e;if(typeof u=="string"&&((n==null?void 0:n.width)===void 0||(n==null?void 0:n.height)===void 0))console.warn("react-new-window: width and height window features must be present when a center prop is provided");else if(u==="parent")window.top===null?console.warn("react-new-window: can't access parent window"):(n.left=window.top.outerWidth/2+window.top.screenX-n.width/2,n.top=window.top.outerHeight/2+window.top.screenY-n.height/2);else if(u==="screen"){const l=window.screenLeft!==void 0?window.screenLeft:"left"in window.screen?window.screen.left:0,r=window.screenTop!==void 0?window.screenTop:"top"in window.screen?window.screen.top:0,m=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,s=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height;n.left=m/2-n.width/2+l,n.top=s/2-n.height/2+r}const o=window.open(t,d,b(n));if(o){if(o.document.title=c,!!h(o)){const r=o.document.getElementById("new-window-container-static");r&&o.document.body.removeChild(r)}else{const r=o.document.createElement("div");r.setAttribute("id","new-window-container"),o.document.body.appendChild(r)}e.copyStyles&&setTimeout(()=>R(document,o.document),0),i&&i(o)}else f?f():console.warn("react-new-window: A new window could not be opened. Maybe it was blocked.");return o},h=e=>e.document.getElementById("new-window-container");return F});
